<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/"></ion-back-button>
        </ion-buttons>
        <ion-title>Tasks</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="changeSprint()"><ion-icon name="swap"></ion-icon></ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-list *ngIf="!selectedServer.sprintId">
        <ion-list-header>Select Sprint</ion-list-header>
        <ion-item>
            <ion-select block (ionChange)="onSelectChange($event)" placeholder="{{'Select Sprint'}}">
                <ion-select-option *ngFor="let sprint of sprints" [value]="sprint.id">
                    {{sprint.name || "no sprints"}}</ion-select-option>
            </ion-select>
        </ion-item>
    </ion-list>

    <!-- Searchbar maybe ionInput is broke -->
    <ion-searchbar text-center placeholder="Task suchen" (ionInput)="searchTasks($event)"></ion-searchbar>

    <!-- Get list of Tasks as Cards -->
    <ion-list>
        <ion-card *ngFor="let task of tasksNewestFirst" (click)="editTask(task)">
            <ion-card-content>
                <h5>{{task.summary}}</h5>
                <p>{{task.description}}</p>
                <p>{{task.estimate}}</p>
            </ion-card-content>
        </ion-card>
    </ion-list>

    <!-- Get list of Tasks as List -->
    <ion-list>
        <ion-item *ngFor="let task of tasksNewestFirst" (click)="editTask(task)">
            <ion-label text-center>
                <h3>{{task.summary}}</h3>
                <p>{{task.description}}</p>
                <p>{{task.estimate}}</p>
            </ion-label>
            <ion-icon name="close-circle" slot="end" (click)="remove()"></ion-icon>
        </ion-item>
    </ion-list>


    <!--Modal for the tasks page to open a task-->
    <!--https://ionicframework.com/docs/v3/components/#modals-->

</ion-content>

<!-- Button to create a new Task -->
<ion-footer>
    <ion-fab vertical="bottom" horizontal="center" slot="fixed">
        <ion-fab-button (click)="addTask()">
            <ion-icon name="add"></ion-icon>
        </ion-fab-button>
    </ion-fab>
</ion-footer>

